@model IEnumerable<CSV>
@{
    Layout = null;
}

<section id="banner" class="rp-logo">
    <img src="~/images/RP_Logo.png" width="200" height="80" />
</section>

@if (TempData["Msg"] != null)
{
    <div class="alert alert-@TempData["MsgType"]">
        @TempData["Msg"]
    </div>
}

<form asp-controller="CSVHelperTest" asp-action="IndexTest" method="post" enctype="multipart/form-data">
    <input type="file" name="file" />
    <br />
    File must be in .csv format
    <br />
    File header format must follow the format below
    <br />

    Id, StudEmail, StudName, StudPhNum, CardStatus, StudAttempts, CardStatusDate, Attempts

    <hr />
    <button type="submit">Upload</button>
</form>

@if (Model.Count() > 0)
{
    <hr />
    <table cellpadding="0" cellspacing="0" width="100%" border="1">
        <tr>
            <td>Email</td>
            <td>Name</td>
            <td>Card Status</td>
            <td>Date</td>
        </tr>
        @foreach (CSV student in Model)
        {


            //string sql = @"INSERT INTO Student
            //                                (student_id, student_email, student_name, ph_num, card_status, cardstatus_date, attempts, passcode )
            //                                VALUES ('{0}', '{1}', '{2}', '{3}', '{4}', '{5}', '{6}', '{7}')";

            //if (DBUtl.ExecSQL(sql, student.Id, student.StudEmail, student.StudName, student.StudPhNum, student.CardStatus, student.CardStatusDate, student.StudAttempts, student.OTP) == 1)
            //{
            //    TempData["Msg"] = "New Added!";
            //    TempData["MsgType"] = "success";
            //}

            //else
            //{
            //    TempData["Msg"] = "Invalid entered!";
            //    TempData["MsgType"] = "warning";
            //}

            <tr>
                <td>@student.StudEmail</td>
                <td>@student.StudName</td>
                <td>@student.CardStatus</td>
                <td>@student.CardStatusDate</td>
            </tr>
        }

        </table>
}